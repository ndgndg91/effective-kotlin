# 가변성을 제한하라

- 가변 컬렉션과 읽기 전용 컬렉션 구분
- 읽기 전용 val 프로퍼티
- 데이터 클래스의 copy
---
- 한 번 정의된 상태가 유지되므로, 코드를 이해하기 쉽다.
- immutable 객체는 공유했을 때도 충돌이 따로 이루어지지 않는다. 따라서 병렬 처리를 안전하게 할 수 있다.
- immutable 객체에 대한 참조는 변경되지 않으므로, 쉽게 캐시할 수 있다.
- immutable 객체는 방어적 복사본 (defensive copy) 을 만들 필요가 없다. 또한 객체를 복사할 때 깊은 복사를 다로 하지 않아도 된다.
- immutable 객체는 다른 객체를 만들 때 활용하기 좋다.
- immutable 객체는 set 혹은 map 의 key 로 사용할 수 있다. (hashcode)
---
# 정리
- var 보다는 val 을 사용하라
- mutable 프로퍼티보다는 immutable 프로퍼티를 사용하라
- mutable 객체와 클래스보다는 immutable 객체와 클래스를 사용하라
- 변경이 필요한 대상을 만들어야 한다면, immutable data class 로 만들고 copy 를 활용하라
- 컬렉션에 상태를 저장해야 한다면, mutable 컬렉션보다는 읽기 전용 컬렉션을 사용하라
- 변이 지점을 적절하게 설계하고, 불필요한 변이 지점은 만들지 마라
- mutable 객체를 외부에 노출 하지 마라